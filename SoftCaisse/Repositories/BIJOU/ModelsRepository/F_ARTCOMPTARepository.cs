using SoftCaisse.Models;
using System;
using System.Collections.Generic;
using System.Linq;

namespace SoftCaisse.Repositories
{
    public class F_ARTCOMPTARepository
    {
        // =================================================================================================
        // DEBUT DECLARATION DES VARIABLES =================================================================
        // =================================================================================================
        private readonly AppDbContext _context;
        // =================================================================================================
        // FIN DECLARATION DES VARIABLES ===================================================================
        // =================================================================================================






        // =================================================================================================
        // DEBUT CONSTRUCTEUR ==============================================================================
        // =================================================================================================
        public F_ARTCOMPTARepository(AppDbContext context)
        {
            _context = context;
        }
        // =================================================================================================
        // FIN CONSTRUCTEUR ================================================================================
        // =================================================================================================





        // =================================================================================================
        // DEBUT GET  ======================================================================================
        // =================================================================================================
        public F_ARTCOMPTA Get_F_ARTCOMPTA_By_AR_Ref_And_DefaultValues_ACPs(string AR_Ref)
        {
            using (AppDbContext context = new AppDbContext())
            {
                return context.F_ARTCOMPTA.Where(artCmpt => artCmpt.AR_Ref == AR_Ref && artCmpt.ACP_TypeFacture == 0 && artCmpt.ACP_Type == 0 && artCmpt.ACP_Champ == 1).FirstOrDefault();
            }
        }


        public List<DTO.ArtCompta> GetAll()
        {
            return _context.F_ARTCOMPTA
            .Select(a => new DTO.ArtCompta
            {
                ACP_ComptaCPT_Taxe1 = a.ACP_ComptaCPT_Taxe1,
                ACP_Champ = a.ACP_Champ,
                AR_Ref = a.AR_Ref
            }).ToList();
        }
        // =================================================================================================
        // DEBUT GET  ======================================================================================
        // =================================================================================================




    }
}
